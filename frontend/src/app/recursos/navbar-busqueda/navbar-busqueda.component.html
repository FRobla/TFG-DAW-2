<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid navbar-container">
    <div class="navbar-wrapper">
      <!-- Columna izquierda - Logo -->
      <div class="navbar-column navbar-left">
        <a class="navbar-brand" href="#">
          <svg class="navbar-logo" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 5L5 12.5L20 20L35 12.5L20 5Z" stroke="#FFFFFF" stroke-width="1.5" fill="none"/>
            <path d="M5 27.5L20 35L35 27.5" stroke="#FFFFFF" stroke-width="1.5" fill="none"/>
            <path d="M20 20V35" stroke="#FFFFFF" stroke-width="1.5" fill="none"/>
            <path d="M12.5 16.25L12.5 27.5" stroke="#FFFFFF" stroke-width="1.5" stroke-opacity="0.7" fill="none"/>
            <path d="M27.5 16.25L27.5 27.5" stroke="#FFFFFF" stroke-width="1.5" stroke-opacity="0.7" fill="none"/>
          </svg>
          <span class="ms-2">PrintLab3D</span>
        </a>
      </div>
      
      <!-- Columna central - Barra de búsqueda -->
      <div class="navbar-column navbar-center d-none d-lg-flex">
        <div class="search-nav-container">
          <div class="input-group">
            <input type="text" class="form-control" [(ngModel)]="busquedaTexto" placeholder="Buscar servicios de impresión 3D, modelado, etc." aria-label="Buscar servicios">
            <button class="btn btn-outline-light" type="button" (click)="buscar()">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Columna derecha - Botones según estado de autenticación -->
      <div class="navbar-column navbar-right d-none d-lg-flex">
        <!-- Si no está autenticado: mostrar botón de login -->
        <button *ngIf="!estaLogueado()" class="btn btn-login" (click)="iniciarSesion()">
          Iniciar Sesión
        </button>
        
        <!-- Si está autenticado como ADMIN: mostrar botones de admin -->
        <div *ngIf="estaLogueado() && esAdmin()" class="navbar-user-actions">
          <button class="btn btn-dashboard" (click)="irAlDashboard()" title="Dashboard">
            <i class="bi bi-speedometer2"></i>
            <span>Dashboard</span>
          </button>
          <button class="btn btn-icon btn-logout" (click)="cerrarSesion()" title="Cerrar Sesión">
            <i class="bi bi-box-arrow-right"></i>
          </button>
        </div>
        
        <!-- Si está autenticado como USER: mostrar iconos de usuario -->
        <div *ngIf="estaLogueado() && esUsuario()" class="navbar-user-actions">
          <button class="btn btn-icon" (click)="irAlPerfil()" title="Perfil">
            <i class="bi bi-person-circle"></i>
          </button>
          <button class="btn btn-icon" (click)="irAlCarrito()" title="Carrito">
            <i class="bi bi-cart3"></i>
          </button>
          <button class="btn btn-icon" (click)="irAFavoritos()" title="Favoritos">
            <i class="bi bi-heart"></i>
          </button>
          <button class="btn btn-icon btn-logout" (click)="cerrarSesion()" title="Cerrar Sesión">
            <i class="bi bi-box-arrow-right"></i>
          </button>
        </div>
      </div>
      
      <!-- Botón de hamburguesa para pantallas pequeñas -->
      <button #navbarToggler class="navbar-toggler" type="button" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
    
    <!-- Menú colapsado para pantallas pequeñas -->
    <div #navbarCollapse class="collapse navbar-collapse" id="navbarNav">
      <div class="d-lg-none mt-3">
        <div class="input-group mb-3">
          <input type="text" class="form-control" [(ngModel)]="busquedaTexto" placeholder="Buscar servicios" aria-label="Buscar servicios">
          <button class="btn btn-outline-light" type="button" (click)="buscar()">Buscar</button>
        </div>
        
        <!-- Menú móvil para usuarios no autenticados -->
        <div *ngIf="!estaLogueado()" class="d-grid">
          <button class="btn btn-login" (click)="iniciarSesion()">Iniciar Sesión</button>
        </div>
        
        <!-- Menú móvil para admins -->
        <div *ngIf="estaLogueado() && esAdmin()" class="mobile-user-menu">
          <div class="d-grid gap-2">
            <button class="btn btn-secondary" (click)="irAlDashboard()">
              <i class="bi bi-speedometer2 me-2"></i>Dashboard
            </button>
            <button class="btn btn-danger" (click)="cerrarSesion()">
              <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión
            </button>
          </div>
        </div>
        
        <!-- Menú móvil para usuarios -->
        <div *ngIf="estaLogueado() && esUsuario()" class="mobile-user-menu">
          <div class="d-grid gap-2">
            <button class="btn btn-secondary" (click)="irAlPerfil()">
              <i class="bi bi-person-circle me-2"></i>Mi Perfil
            </button>
            <button class="btn btn-secondary" (click)="irAlCarrito()">
              <i class="bi bi-cart3 me-2"></i>Carrito
            </button>
            <button class="btn btn-secondary" (click)="irAFavoritos()">
              <i class="bi bi-heart me-2"></i>Favoritos
            </button>
            <button class="btn btn-danger" (click)="cerrarSesion()">
              <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
